import{$ as r}from"./jquery-C13ZeFGA.js";import{s as g,e as p,c as i,w as o,r as a,o as n,d as b,a as e,b as u,g as f}from"./index-DNdhB_e1.js";function v(){return g({url:"/monitor/streams",method:"get"})}const y={class:"filter-container",style:{"margin-bottom":"10px",height:"40px"}},w={data(){return{loading:!1,streams:[],elTableHeight:r(".el-scrollbar").height()}},created(){this.loading=!0,this.fetchStreams(),window.addEventListener("resize",this.handleHightChange)},destroyed(){window.removeEventListener("resize",this.handleHightChange)},methods:{fetchStreams(){this.loading=!0,v().then(s=>{this.streams=s.data,this.$message.success("获取流信息成功"),this.loading=!1}).catch(s=>{console.log(s),this.$message.error("获取流信息失败"),this.loading=!1})},handleHightChange(){this.elTableHeight=r(".el-scrollbar").height()}}},x=Object.assign(w,{__name:"streams",setup(s){return(l,C)=>{const c=a("el-button"),t=a("el-table-column"),h=a("el-table"),d=a("el-scrollbar"),m=a("el-container"),_=p("loading");return n(),i(m,{style:{height:"100%",margin:"0",padding:"0"},direction:"vertical"},{default:o(()=>[b("div",y,[e(c,{type:"primary",onClick:l.fetchStreams},{default:o(()=>[u("刷新")]),_:1},8,["onClick"])]),e(d,{style:{height:"calc(100% - 80px)",width:"100%"}},{default:o(()=>[f((n(),i(h,{height:l.elTableHeight,data:l.streams,style:{width:"100%"},"table-layout":"auto"},{default:o(()=>[e(t,{type:"index",label:"#"}),e(t,{prop:"stream_id",label:"stream_id"}),e(t,{prop:"type",label:"类型"}),e(t,{prop:"status",label:"状态"}),e(t,{prop:"create_time",label:"创建时间"}),e(t,{prop:"created_by",label:"创建者"}),e(t,{prop:"listeners",label:"监听者"})]),_:1},8,["height","data"])),[[_,l.loading]])]),_:1})]),_:1})}}});export{x as default};
